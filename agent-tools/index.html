<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agentå·¥å…·åŒ…é›†åˆ</title>
    <link rel="stylesheet" href="assets/style.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>ğŸ¤– Agentå·¥å…·åŒ…é›†åˆ</h1>
            <p class="subtitle">å…¨é¢çš„AI Agentå¼€å‘å·¥å…·åŒ…èµ„æºåº“</p>
        </div>
    </header>

    <main class="container">
        <!-- ç­›é€‰å™¨ -->
        <section class="filters">
            <div class="filter-group">
                <label>ç±»å‹ç­›é€‰ï¼š</label>
                <button class="filter-btn active" data-filter="all">å…¨éƒ¨</button>
                <button class="filter-btn" data-filter="å¼€æº">å¼€æº</button>
                <button class="filter-btn" data-filter="å•†ä¸š">å•†ä¸š</button>
            </div>
            <div class="filter-group">
                <label>åˆ†ç±»ç­›é€‰ï¼š</label>
                <button class="filter-btn active" data-category="all">å…¨éƒ¨</button>
                <button class="filter-btn" data-category="é€šç”¨æ¡†æ¶">é€šç”¨æ¡†æ¶</button>
                <button class="filter-btn" data-category="å¤šæ™ºèƒ½ä½“æ¡†æ¶">å¤šæ™ºèƒ½ä½“</button>
                <button class="filter-btn" data-category="æ•°æ®æ¡†æ¶">æ•°æ®æ¡†æ¶</button>
            </div>
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="æœç´¢å·¥å…·åŒ…...">
            </div>
        </section>

        <!-- å·¥å…·åŒ…å¡ç‰‡å®¹å™¨ -->
        <section id="agentsContainer" class="agents-grid">
            <p class="no-results">æ­£åœ¨åŠ è½½...</p>
        </section>

        <!-- è¯¦ç»†ä¿¡æ¯æ¨¡æ€æ¡† -->
        <div id="modal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <div id="modalBody"></div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2026 Agentå·¥å…·åŒ…é›†åˆ | æœ€åæ›´æ–°: 2026å¹´1æœˆ</p>
        </div>
    </footer>

    <!-- æ•°æ®åŠ è½½è„šæœ¬ -->
    <script src="data/agents.json" type="application/json" id="agentsDataScript"></script>
    
    <script>
        // å…¨å±€å˜é‡
        let agentsData = [];

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        // åˆå§‹åŒ–åº”ç”¨
        async function initializeApp() {
            try {
                // å°è¯•ä»JSONæ–‡ä»¶åŠ è½½
                const response = await fetch('data/agents.json');
                const data = await response.json();
                agentsData = data.agents;
            } catch (error) {
                console.error('åŠ è½½æ•°æ®å¤±è´¥ï¼Œè¯·æ£€æŸ¥data/agents.jsonæ–‡ä»¶æ˜¯å¦å­˜åœ¨', error);
                document.getElementById('agentsContainer').innerHTML = 
                    '<p class="no-results">æ•°æ®åŠ è½½å¤±è´¥ï¼Œè¯·ç¡®ä¿data/agents.jsonæ–‡ä»¶å­˜åœ¨å¹¶åˆ·æ–°é¡µé¢</p>';
                return;
            }
            
            if (agentsData && agentsData.length > 0) {
                renderAgents(agentsData);
                setupEventListeners();
            } else {
                document.getElementById('agentsContainer').innerHTML = 
                    '<p class="no-results">æš‚æ— æ•°æ®</p>';
            }
        }

        // æ¸²æŸ“å·¥å…·åŒ…å¡ç‰‡
        function renderAgents(agents) {
            const container = document.getElementById('agentsContainer');
            container.innerHTML = '';

            if (!agents || agents.length === 0) {
                container.innerHTML = '<p class="no-results">æœªæ‰¾åˆ°åŒ¹é…çš„å·¥å…·åŒ…</p>';
                return;
            }

            agents.forEach(agent => {
                const card = createAgentCard(agent);
                container.appendChild(card);
            });
        }

        // åˆ›å»ºå•ä¸ªå¡ç‰‡
        function createAgentCard(agent) {
            const card = document.createElement('div');
            card.className = 'agent-card';
            card.dataset.type = agent.type;
            card.dataset.category = agent.category;

            const typeClass = agent.type === 'å¼€æº' ? 'type-open' : 'type-commercial';
            
            const githubLink = (agent.github !== 'é—­æº' && agent.github !== 'éƒ¨åˆ†å¼€æº') ? 
                `<a href="${agent.github}" target="_blank" class="btn-link">GitHub</a>` : '';
            
            const starsDiv = agent.stars !== 'N/A' ? 
                `<div class="stars">â­ ${agent.stars}</div>` : '';
            
            card.innerHTML = `
                <div class="card-header">
                    <h3>${agent.name}</h3>
                    <span class="type-badge ${typeClass}">${agent.type}</span>
                </div>
                <p class="category">${agent.category}</p>
                <p class="description">${agent.description}</p>
                <div class="card-footer">
                    <div class="languages">
                        ${agent.languages.map(lang => `<span class="lang-tag">${lang}</span>`).join('')}
                    </div>
                    <div class="card-actions">
                        ${githubLink}
                        <button class="btn-primary" onclick="showDetails('${agent.id}')">æŸ¥çœ‹è¯¦æƒ…</button>
                    </div>
                </div>
                ${starsDiv}
            `;

            return card;
        }

        // æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
        function showDetails(agentId) {
            const agent = agentsData.find(a => a.id === agentId);
            if (!agent) return;

            const modal = document.getElementById('modal');
            const modalBody = document.getElementById('modalBody');

            const githubInfo = agent.github !== 'é—­æº' ? 
                `<a href="${agent.github}" target="_blank">${agent.github}</a>` : 
                agent.github;

            modalBody.innerHTML = `
                <h2>${agent.name}</h2>
                <div class="detail-header">
                    <span class="type-badge ${agent.type === 'å¼€æº' ? 'type-open' : 'type-commercial'}">${agent.type}</span>
                    <span class="category-badge">${agent.category}</span>
                </div>

                <div class="detail-section">
                    <h3>ğŸ“– ç®€ä»‹</h3>
                    <p>${agent.description}</p>
                </div>

                <div class="detail-section">
                    <h3>ğŸ”— é“¾æ¥</h3>
                    <p><strong>å®˜ç½‘ï¼š</strong><a href="${agent.website}" target="_blank">${agent.website}</a></p>
                    <p><strong>GitHubï¼š</strong>${githubInfo}</p>
                    <p><strong>å®šä»·ï¼š</strong>${agent.pricing}</p>
                </div>

                <div class="detail-section">
                    <h3>âœ¨ æ ¸å¿ƒåŠŸèƒ½</h3>
                    <ul class="features-list">
                        ${agent.features.map(feature => `<li>${feature}</li>`).join('')}
                    </ul>
                </div>

                <div class="detail-section">
                    <h3>ğŸ”§ ä¸»è¦å‡½æ•°/API</h3>
                    ${renderFunctions(agent.functions)}
                </div>

                <div class="detail-section pros-cons">
                    <div class="pros">
                        <h3>âœ… ä¼˜ç‚¹</h3>
                        <ul>
                            ${agent.pros.map(pro => `<li>${pro}</li>`).join('')}
                        </ul>
                    </div>
                    <div class="cons">
                        <h3>âš ï¸ ç¼ºç‚¹</h3>
                        <ul>
                            ${agent.cons.map(con => `<li>${con}</li>`).join('')}
                        </ul>
                    </div>
                </div>

                <div class="detail-section">
                    <h3>ğŸ’» æ”¯æŒçš„è¯­è¨€</h3>
                    <div class="languages">
                        ${agent.languages.map(lang => `<span class="lang-tag-large">${lang}</span>`).join('')}
                    </div>
                </div>
            `;

            modal.style.display = 'block';
        }

        // æ¸²æŸ“å‡½æ•°åˆ—è¡¨
        function renderFunctions(functions) {
            let html = '<div class="functions-grid">';
            
            for (const [category, funcs] of Object.entries(functions)) {
                html += `
                    <div class="function-category">
                        <h4>${category}</h4>
                        <ul>
                `;
                
                for (const [funcName, funcDesc] of Object.entries(funcs)) {
                    html += `<li><code>${funcName}</code> - ${funcDesc}</li>`;
                }
                
                html += `
                        </ul>
                    </div>
                `;
            }
            
            html += '</div>';
            return html;
        }

        // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
        function setupEventListeners() {
            // ç±»å‹ç­›é€‰
            document.querySelectorAll('[data-filter]').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('[data-filter]').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    applyFilters();
                });
            });

            // åˆ†ç±»ç­›é€‰
            document.querySelectorAll('[data-category]').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('[data-category]').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    applyFilters();
                });
            });

            // æœç´¢
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('input', applyFilters);
            }

            // æ¨¡æ€æ¡†å…³é—­
            const closeBtn = document.querySelector('.close');
            if (closeBtn) {
                closeBtn.addEventListener('click', function() {
                    document.getElementById('modal').style.display = 'none';
                });
            }

            // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
            window.addEventListener('click', function(event) {
                const modal = document.getElementById('modal');
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        }

        // åº”ç”¨ç­›é€‰
        function applyFilters() {
            const typeFilter = document.querySelector('[data-filter].active');
            const categoryFilter = document.querySelector('[data-category].active');
            const searchInput = document.getElementById('searchInput');
            
            if (!typeFilter || !categoryFilter || !agentsData) return;
            
            const typeValue = typeFilter.dataset.filter;
            const categoryValue = categoryFilter.dataset.category;
            const searchTerm = searchInput ? searchInput.value.toLowerCase() : '';

            let filtered = agentsData;

            // ç±»å‹ç­›é€‰
            if (typeValue !== 'all') {
                filtered = filtered.filter(agent => agent.type === typeValue);
            }

            // åˆ†ç±»ç­›é€‰
            if (categoryValue !== 'all') {
                filtered = filtered.filter(agent => agent.category === categoryValue);
            }

            // æœç´¢ç­›é€‰
            if (searchTerm) {
                filtered = filtered.filter(agent => 
                    agent.name.toLowerCase().includes(searchTerm) ||
                    agent.description.toLowerCase().includes(searchTerm) ||
                    agent.category.toLowerCase().includes(searchTerm)
                );
            }

            renderAgents(filtered);
        }
    </script>
</body>
</html>
